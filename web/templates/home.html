{% extends "base.html" %}

{% block title %}{{ t("nav.home", lang) }}{% endblock %}

{% block content %}
{% set lang = get_lang(request) %}
<div class="gf-container gf-section">

    <!-- Hero / Featured -->
    {% if featured %}
    <section style="margin-bottom: 48px;">
        <h2 class="gf-section__title">{{ t("home.featured", lang) }}</h2>

        <!-- Hero article (first one, large) -->
        {% set article = featured[0] %}
        {% include "partials/article_card_hero.html" %}

        <!-- Remaining featured articles -->
        {% if featured | length > 1 %}
        <div class="gf-grid gf-grid--3" style="margin-top: 20px;">
            {% for article in featured[1:] %}
            {% include "partials/article_card.html" %}
            {% endfor %}
        </div>
        {% endif %}
    </section>
    {% endif %}

    <!-- Latest articles â€” Animated Carousel -->
    {% if articles %}
    <section class="gf-showcase">
        <div class="gf-showcase__header">
            <h2 class="gf-section__title" style="margin-bottom: 0;">{{ t("home.latest", lang) }}</h2>
            <div class="gf-showcase__controls">
                <button class="gf-showcase__arrow gf-showcase__arrow--prev" id="showcase-prev" aria-label="{{ t('pagination.prev', lang) }}">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </button>
                <button class="gf-showcase__arrow gf-showcase__arrow--next" id="showcase-next" aria-label="{{ t('pagination.next', lang) }}">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </button>
            </div>
        </div>

        <div class="gf-showcase__viewport" id="showcase-viewport">
            <div class="gf-showcase__track" id="showcase-track">
                {% for article in articles %}
                <div class="gf-showcase__item">
                    {% include "partials/carousel_slide.html" %}
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Progress dots -->
        <div class="gf-showcase__footer">
            <div class="gf-showcase__dots" id="showcase-dots"></div>
            <div class="gf-showcase__progress">
                <div class="gf-showcase__progress-bar" id="showcase-progress"></div>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Remaining articles grid + pagination -->
    {% if articles | length > 6 %}
    <section style="margin-top: 48px;">
        <h2 class="gf-section__title">{{ t("home.more", lang) }}</h2>
        <div class="gf-grid gf-grid--3">
            {% for article in articles[6:] %}
            {% include "partials/article_card.html" %}
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {% if total_pages > 1 %}
    <div class="gf-pagination">
        {% if page > 1 %}
        <a href="/?page={{ page - 1 }}" class="gf-pagination__btn">&laquo; {{ t("pagination.prev", lang) }}</a>
        {% endif %}
        <span class="gf-pagination__current">{{ page }} / {{ total_pages }}</span>
        {% if page < total_pages %}
        <a href="/?page={{ page + 1 }}" class="gf-pagination__btn">{{ t("pagination.next", lang) }} &raquo;</a>
        {% endif %}
    </div>
    {% endif %}

    {% if not articles %}
    <div class="gf-empty">
        <p class="gf-empty__text">{{ t("home.empty", lang) }}</p>
        <p class="gf-empty__subtext">{{ t("home.empty_sub", lang) }}</p>
    </div>
    {% endif %}
</div>
{% endblock %}
